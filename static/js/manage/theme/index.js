(function($){$.extend({"ajaxCallback":function(rv,success_cb,fail_cb){var auto_alert_error=true;try{var data=$.parseJSON(rv);if(data.code!=100000){if(typeof fail_cb!=="undefined"){auto_alert_error=fail_cb(data);}
if(auto_alert_error){$.alert(data.msg);}}else{if(typeof success_cb!=="undefined"){success_cb(data);}else{$.alert("操作成功",false,function(){location.reload();});}}}catch(e){console.log(e);$.alert(rv);}},"ajaxCallbackDefault":function(response){$.ajaxCallback(response,function(){location.reload();});}});$.fn.extend({"ajaxSubmit":function(success_cb,fail_cb){var form_jq=$(this);form_jq.submit(function(){var method=form_jq.attr("method");var action=form_jq.attr("action");var data=form_jq.serialize();if(!data){$.alert("提交内容为空");}else{$.ajax(action,{"cache":false,"data":data,"type":method,"success":function(o){$.ajaxCallback(o,success_cb,fail_cb);}});}});},"selectAll":function(select_control,child_nodes){var box=$(this);var child_obj=box.find(":checkbox").filter(child_nodes);var control_obj=box.find(select_control);box.delegate(select_control,"click",function(){child_obj.prop("checked",$(this).prop("checked"));});box.delegate(child_nodes,"click",function(){var child_all_size=box.find(child_nodes).size();var child_checked_size=$(child_nodes).filter(":checked").size();if(child_all_size===child_checked_size){control_obj.prop("checked",true);}else{control_obj.prop("checked",false);}});}});})(jQuery);;$(function(){$("#modal-theme-copy").on("show.bs.modal",function(event){var button=$(event.relatedTarget);var $theme_node=button.parents("[node-type=theme-node]");var theme_id=$theme_node.data("theme-id");$(this).find("[name=alias_id]").val(theme_id);});$("#form-theme-copy").ajaxSubmit();$("#theme-container").delegate("[action-type=destroy]","click",function(){var $theme_node=$(this).parents("[node-type=theme-node]");var theme_id=$theme_node.data("theme-id");var href=$CONFIG.path+"aj/manage/theme/destroy";if($.confirm("确定要删除吗?","确认",function(){$.post(href,{"id":theme_id},function(o){$.ajaxCallback(o,function(){$theme_node.fadeOut();});});}));}).delegate("[action-type=use]","click",function(){var href=$CONFIG.path+"aj/manage/theme/use";var $theme_node=$(this).parents("[node-type=theme-node]");var theme_id=$theme_node.data("theme-id");$.post(href,{"theme_id":theme_id},$.ajaxCallbackDefault);});});