(function($){$.extend({"ajaxCallback":function(rv,success_cb,fail_cb){var auto_alert_error=true;try{var data=$.parseJSON(rv);if(data.code!=100000){if(typeof fail_cb!=="undefined"){auto_alert_error=fail_cb(data);}
if(auto_alert_error){$.alert(data.msg);}}else{if(typeof success_cb!=="undefined"){success_cb(data);}else{$.alert("操作成功",false,function(){location.reload();});}}}catch(e){console.log(e);$.alert(rv);}},"ajaxCallbackDefault":function(response){$.ajaxCallback(response,function(){location.reload();});}});$.fn.extend({"ajaxSubmit":function(success_cb,fail_cb){var form_jq=$(this);form_jq.submit(function(){var method=form_jq.attr("method");var action=form_jq.attr("action");var data=form_jq.serialize();if(!data){$.alert("提交内容为空");}else{$.ajax(action,{"cache":false,"data":data,"type":method,"success":function(o){$.ajaxCallback(o,success_cb,fail_cb);}});}});},"selectAll":function(select_control,child_nodes){var box=$(this);var child_obj=box.find(":checkbox").filter(child_nodes);var control_obj=box.find(select_control);box.delegate(select_control,"click",function(){child_obj.prop("checked",$(this).prop("checked"));});box.delegate(child_nodes,"click",function(){var child_all_size=box.find(child_nodes).size();var child_checked_size=$(child_nodes).filter(":checked").size();if(child_all_size===child_checked_size){control_obj.prop("checked",true);}else{control_obj.prop("checked",false);}});}});})(jQuery);;(function($){$.fn.extend({"editor":function(){CKEDITOR.plugins.addExternal('pbckcode','/static/lib/ckeditor_plugin/pbckcode/','plugin.js');$(this).each(function(){CKEDITOR.replace($(this)[0],{"extraPlugins":"pbckcode","pbckcode":{"highlighter":"SYNTAX_HIGHLIGHTER","tab_size":"4","modes":[['HTML','html'],['CSS','css'],['PHP','php'],['JS','javascript']],"js":"http://libs.cncdn.cn/ace/1.2.2/"},"font_defaultLabel":"Simsun","font_names":"Simsun;SimHei;KaiTi;Microsoft Yahei;Arial;Times New Roman;Verdana;","fontSize_defaultLabel":"14px","toolbar":[["Styles","Format","Font","FontSize"],["Bold","Italic","Underline","Strike","-",'TextColor','BGColor'],['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock',"-",'NumberedList','BulletedList','-','Link',"Unlink"],["Image","Flash","Table","HorizontalRule","SpecialChar","Iframe","pbckcode"],["Maximize","-","Source"]],"filebrowserImageUploadUrl":$CONFIG.path+'editor/upload?type=images',"filebrowserFlashUploadUrl":$CONFIG.path+'editor/upload?type=flash',"filebrowserWindowWidth":'800',"filebrowserWindowHeight":'500'});})}});})(jQuery);;$(function(){$("#input_content").editor();$("#form-manage-article-create").submit(function(){var method=$(this).attr("method");var action=$(this).attr("action");var data=$(this).serializeArray();data.push({"name":"content","value":CKEDITOR.instances.input_content.getData()});$.ajax(action,{"cache":false,"data":data,"type":method,"success":function(response){$.ajaxCallback(response,function(o){location.href=o.data.href;});}});});});